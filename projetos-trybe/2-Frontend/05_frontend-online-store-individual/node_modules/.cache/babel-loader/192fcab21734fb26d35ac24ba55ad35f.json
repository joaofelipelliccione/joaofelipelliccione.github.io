{"ast":null,"code":"var _jsxFileName = \"/home/joaofelipe/joaofelipelliccione.github.io/projetos-trybe/2-Frontend/05_frontend-online-store-individual/src/pages/Cart.jsx\";\nimport React from 'react';\nimport CartCard from '../components/CartCard';\nimport Header from '../components/Header';\n\nclass Cart extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.insertItensInTheCart = () => {\n      // Função que capta os itens do carrinho salvos no local storage, sempre que a página Cart for montada.\n      const cartItems = JSON.parse(localStorage.getItem('userCart'));\n      this.setState({\n        cartItems\n      });\n    };\n\n    this.updateLocStUserCart = () => {\n      // Função que atualiza as keys \"userCart\", \"totalItemsOnCart\" e \"purchaseTotalValue\", contidas no local storage, sempre que algum estado da página Cart for atualizado (ou seja, quando há adição, subtração ou deleção de produto).\n      const {\n        cartItems\n      } = this.state;\n\n      if (cartItems.length === 0) {\n        localStorage.setItem('userCart', JSON.stringify([]));\n        localStorage.setItem(\"totalItemsOnCart\", JSON.stringify(0));\n        localStorage.setItem(\"purchaseTotalValue\", JSON.stringify(0));\n      }\n\n      if (cartItems.length !== 0) {\n        // Atualização do carrinho:\n        localStorage.setItem('userCart', JSON.stringify(cartItems)); // Atualização da quantidade de itens no carrinho:\n\n        const quantitiesArray = cartItems.map(microObj => microObj.quantity);\n        const totalQuant = quantitiesArray.reduce((result, value) => result + value);\n        localStorage.setItem(\"totalItemsOnCart\", JSON.stringify(totalQuant)); // Atualização do atual valor total (R$) do carrinho:\n\n        const totalValuesArray = cartItems.map(microObj => microObj.totalValue);\n        const totalValue = totalValuesArray.reduce((result, value) => result + value);\n        localStorage.setItem(\"purchaseTotalValue\", JSON.stringify(totalValue));\n      }\n    };\n\n    this.deleteCartItem = ({\n      target\n    }) => {\n      // Função que deleta produtos do carrinho.\n      const {\n        cartItems\n      } = this.state;\n      const productIndex = cartItems.findIndex(product => product.productId === target.id); // REF: https://developer.mozilla.org/pt-BR/docs/Web/JavaScript/Reference/Global_Objects/Array/findIndex\n      // OBS: Todos os botões de deletar, possuem Id igual à ID do produto. Isso possibilita o funcionamento do target acima.\n\n      this.setState({\n        cartItems: cartItems.filter((_product, index) => index !== productIndex) // Retorna todos os produtos contidos no estado 'cartItems', menos o produto excluído.\n\n      });\n    };\n\n    this.itemsOnCartCalculator = () => {\n      const userCartFromLocSt = JSON.parse(localStorage.getItem(\"userCart\"));\n      const quantitiesArray = userCartFromLocSt.map(microObj => microObj.quantity);\n      const total = quantitiesArray.reduce((result, value) => result + value);\n      localStorage.setItem(\"totalItemsOnCart\", JSON.stringify(total));\n    };\n\n    this.purchaseTVCalculator = () => {\n      const userCartFromLocSt = JSON.parse(localStorage.getItem(\"userCart\"));\n      const totalValuesArray = userCartFromLocSt.map(microObj => microObj.totalValue);\n      const total = totalValuesArray.reduce((result, value) => result + value);\n      localStorage.setItem(\"purchaseTotalValue\", JSON.stringify(total));\n    };\n\n    this.state = {\n      cartItems: []\n    };\n  }\n\n  componentDidMount() {\n    this.insertItensInTheCart();\n  }\n\n  componentDidUpdate() {\n    this.updateLocStUserCart();\n  }\n\n  render() {\n    const {\n      cartItems,\n      purchaseTotalValue\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      id: \"cartPage\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Header, {\n      cartItems: cartItems,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"main\", {\n      id: \"cartProductsDisplay\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }\n    }, cartItems.length === 0 ? /*#__PURE__*/React.createElement(\"h3\", {\n      \"data-testid\": \"shopping-cart-empty-message\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 15\n      }\n    }, \"Seu carrinho est\\xE1 vazio\") : cartItems.map(cartItem => /*#__PURE__*/React.createElement(\"div\", {\n      className: \"eachCartCardContainer\",\n      key: cartItem.title,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(CartCard, {\n      title: cartItem.title,\n      thumbnail: cartItem.thumbnail,\n      productPrice: cartItem.price,\n      productId: cartItem.productId,\n      deleteCartItem: this.deleteCartItem,\n      itemsOnCartCalculator: this.itemsOnCartCalculator,\n      purchaseTVCalculator: this.purchaseTVCalculator,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 17\n      }\n    })))));\n  }\n\n}\n\nexport default Cart;","map":{"version":3,"sources":["/home/joaofelipe/joaofelipelliccione.github.io/projetos-trybe/2-Frontend/05_frontend-online-store-individual/src/pages/Cart.jsx"],"names":["React","CartCard","Header","Cart","Component","constructor","props","insertItensInTheCart","cartItems","JSON","parse","localStorage","getItem","setState","updateLocStUserCart","state","length","setItem","stringify","quantitiesArray","map","microObj","quantity","totalQuant","reduce","result","value","totalValuesArray","totalValue","deleteCartItem","target","productIndex","findIndex","product","productId","id","filter","_product","index","itemsOnCartCalculator","userCartFromLocSt","total","purchaseTVCalculator","componentDidMount","componentDidUpdate","render","purchaseTotalValue","cartItem","title","thumbnail","price"],"mappings":"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","sourcesContent":["import React from 'react';\nimport CartCard from '../components/CartCard';\nimport Header from '../components/Header';\n\nclass Cart extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      cartItems: [],\n    };\n  }\n\n  componentDidMount() {\n    this.insertItensInTheCart();\n  }\n\n  componentDidUpdate() {\n    this.updateLocStUserCart();\n  }\n\n  insertItensInTheCart = () => { // Função que capta os itens do carrinho salvos no local storage, sempre que a página Cart for montada.\n    const cartItems = JSON.parse(localStorage.getItem('userCart'));\n    this.setState({ cartItems });\n  }\n\n  updateLocStUserCart = () => { // Função que atualiza as keys \"userCart\", \"totalItemsOnCart\" e \"purchaseTotalValue\", contidas no local storage, sempre que algum estado da página Cart for atualizado (ou seja, quando há adição, subtração ou deleção de produto).\n    const { cartItems } = this.state;\n\n    if (cartItems.length === 0) {\n      localStorage.setItem('userCart', JSON.stringify([]));\n      localStorage.setItem(\"totalItemsOnCart\", JSON.stringify(0));\n      localStorage.setItem(\"purchaseTotalValue\", JSON.stringify(0));\n    }\n\n    if (cartItems.length !== 0) {\n      // Atualização do carrinho:\n      localStorage.setItem('userCart', JSON.stringify(cartItems));\n\n      // Atualização da quantidade de itens no carrinho:\n      const quantitiesArray = cartItems.map((microObj) => microObj.quantity);\n      const totalQuant = quantitiesArray.reduce((result, value) => result + value);\n      localStorage.setItem(\"totalItemsOnCart\", JSON.stringify(totalQuant));\n\n      // Atualização do atual valor total (R$) do carrinho:\n      const totalValuesArray = cartItems.map((microObj) => microObj.totalValue);\n      const totalValue = totalValuesArray.reduce((result, value) => result + value);\n      localStorage.setItem(\"purchaseTotalValue\", JSON.stringify(totalValue));\n    }\n  }\n\n  deleteCartItem = ({ target }) => { // Função que deleta produtos do carrinho.\n    const { cartItems } = this.state;\n    const productIndex = cartItems.findIndex((product) => product.productId === target.id); // REF: https://developer.mozilla.org/pt-BR/docs/Web/JavaScript/Reference/Global_Objects/Array/findIndex\n    // OBS: Todos os botões de deletar, possuem Id igual à ID do produto. Isso possibilita o funcionamento do target acima.\n\n    this.setState({\n      cartItems: cartItems.filter((_product, index) => index !== productIndex), // Retorna todos os produtos contidos no estado 'cartItems', menos o produto excluído.\n    });\n  }\n\n  itemsOnCartCalculator = () => {\n    const userCartFromLocSt = JSON.parse(localStorage.getItem(\"userCart\"));\n\n    const quantitiesArray = userCartFromLocSt.map((microObj) => microObj.quantity);\n\n    const total = quantitiesArray.reduce((result, value) => result + value);\n\n    localStorage.setItem(\"totalItemsOnCart\", JSON.stringify(total));\n  }\n\n  purchaseTVCalculator = () => {\n    const userCartFromLocSt = JSON.parse(localStorage.getItem(\"userCart\"));\n\n    const totalValuesArray = userCartFromLocSt.map((microObj) => microObj.totalValue);\n\n    const total = totalValuesArray.reduce((result, value) => result + value);\n\n    localStorage.setItem(\"purchaseTotalValue\", JSON.stringify(total));\n  }\n\n  render() {\n    const { cartItems, purchaseTotalValue } = this.state;\n\n    return (\n      <div id=\"cartPage\">\n        <Header cartItems={ cartItems } />\n\n        <main id=\"cartProductsDisplay\">\n          {cartItems.length === 0\n            ? <h3 data-testid=\"shopping-cart-empty-message\">Seu carrinho está vazio</h3>\n            : cartItems.map((cartItem) => (\n              <div className=\"eachCartCardContainer\" key={ cartItem.title }>\n                <CartCard\n                  title={ cartItem.title }\n                  thumbnail={ cartItem.thumbnail }\n                  productPrice={ cartItem.price }\n                  productId={ cartItem.productId }\n                  deleteCartItem={ this.deleteCartItem }\n                  itemsOnCartCalculator={ this.itemsOnCartCalculator }\n                  purchaseTVCalculator={ this.purchaseTVCalculator }\n                />\n              </div>\n            ))}\n        </main>\n      </div>\n    );\n  }\n}\n\nexport default Cart;\n"]},"metadata":{},"sourceType":"module"}