{"ast":null,"code":"var _jsxFileName = \"/home/joaofelipe/\\xC1rea de Trabalho/frontend-online-store-individual/src/pages/Home.jsx\";\nimport React from 'react';\nimport { Link } from 'react-router-dom';\nimport { getProductsFromCategoryAndQuery } from '../services/api';\nimport Card from '../components/Card';\nimport Categories from '../components/Categories';\nimport Header from '../components/Header';\n\nclass Home extends React.Component {\n  constructor() {\n    super();\n\n    this.setCart = () => {\n      const cartItemsLocal = JSON.parse(localStorage.getItem('carrinho'));\n\n      if (Array.isArray(cartItemsLocal)) {\n        this.setState({\n          cartItems: cartItemsLocal\n        });\n      }\n    };\n\n    this.addToLocalCart = () => {\n      const {\n        cartItems\n      } = this.state;\n      localStorage.setItem('carrinho', JSON.stringify(cartItems));\n    };\n\n    this.handleClick = () => {\n      const {\n        categoryId,\n        text\n      } = this.state;\n      getProductsFromCategoryAndQuery(categoryId, text).then(response => {\n        this.setState({\n          didSearch: true,\n          results: response.results\n        });\n      });\n    };\n\n    this.addToCart = ({\n      target\n    }) => {\n      const {\n        id\n      } = target;\n      const {\n        results,\n        cartItens\n      } = this.state;\n      const objProduct = {\n        title: results[id].title,\n        thumbnail: results[id].thumbnail,\n        price: results[id].price,\n        id: results[id].id\n      };\n\n      if (!cartItens.some(item => item.title === objProduct.title)) {\n        this.setState(prevState => ({\n          cartItens: [...prevState.cartItens, objProduct]\n        }));\n      }\n    };\n\n    this.categoryChecked = async ({\n      target\n    }) => {\n      const {\n        text\n      } = this.state;\n      this.setState({\n        categoryId: target.id\n      });\n      const response = await getProductsFromCategoryAndQuery(target.id, text);\n      this.setState({\n        results: response.results,\n        didSearch: true\n      });\n    };\n\n    this.onInputChange = ({\n      target\n    }) => {\n      const {\n        name\n      } = target;\n      const formElementValue = target.type === 'checkbox' ? target.checked : target.value;\n      this.setState({\n        [name]: formElementValue\n      });\n    };\n\n    this.state = {\n      text: '',\n      categoryId: '',\n      results: [],\n      didSearch: false,\n      cartItems: []\n    };\n  }\n\n  componentDidMount() {\n    this.setCart();\n  }\n\n  componentDidUpdate() {\n    this.addToLocalCart();\n  }\n\n  componentWillUnmount() {\n    const {\n      results\n    } = this.state;\n    localStorage.setItem('results', JSON.stringify(results));\n  }\n\n  render() {\n    const {\n      results,\n      didSearch,\n      text,\n      cartItens\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Header, {\n      cartItems: cartItens,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }\n    }, `Quantidade de Produtos no carrinho:${cartItens.length}`), /*#__PURE__*/React.createElement(Link, {\n      \"data-testid\": \"shopping-cart-button\",\n      to: \"/cart\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }\n    }, \"Carrinho\"), /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"search\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      \"data-testid\": \"query-input\",\n      name: \"text\",\n      id: \"search\",\n      value: text,\n      onChange: this.onInputChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      onClick: this.handleClick,\n      \"data-testid\": \"query-button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }\n    }, \"pesquisar\"), !didSearch ? /*#__PURE__*/React.createElement(\"p\", {\n      \"data-testid\": \"home-initial-message\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 13\n      }\n    }, \"Digite algum termo de pesquisa ou escolha uma categoria.\") : results.map((item, i) => /*#__PURE__*/React.createElement(\"div\", {\n      key: item.id,\n      \"data-testid\": \"product\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Card, {\n      id: item.id,\n      title: item.title,\n      thumbnail: item.thumbnail,\n      price: item.price,\n      idItem: i,\n      addToCart: this.addToCart,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 15\n      }\n    }))), results.length !== 0 && /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 35\n      }\n    }, \"Nenhum produto foi encontrado\"), /*#__PURE__*/React.createElement(\"aside\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Categories, {\n      categoryChecked: this.categoryChecked,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 11\n      }\n    })));\n  }\n\n}\n\nexport default Home;","map":{"version":3,"sources":["/home/joaofelipe/Ãrea de Trabalho/frontend-online-store-individual/src/pages/Home.jsx"],"names":["React","Link","getProductsFromCategoryAndQuery","Card","Categories","Header","Home","Component","constructor","setCart","cartItemsLocal","JSON","parse","localStorage","getItem","Array","isArray","setState","cartItems","addToLocalCart","state","setItem","stringify","handleClick","categoryId","text","then","response","didSearch","results","addToCart","target","id","cartItens","objProduct","title","thumbnail","price","some","item","prevState","categoryChecked","onInputChange","name","formElementValue","type","checked","value","componentDidMount","componentDidUpdate","componentWillUnmount","render","length","map","i"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { getProductsFromCategoryAndQuery } from '../services/api';\nimport Card from '../components/Card';\nimport Categories from '../components/Categories';\nimport Header from '../components/Header';\n\nclass Home extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      text: '',\n      categoryId: '',\n      results: [],\n      didSearch: false,\n      cartItems: [],\n    };\n  }\n\n  componentDidMount() {\n    this.setCart();\n  }\n\n  componentDidUpdate() {\n    this.addToLocalCart();\n  }\n\n  componentWillUnmount() {\n    const { results } = this.state;\n    localStorage.setItem('results', JSON.stringify(results));\n  }\n\n  setCart = () => {\n    const cartItemsLocal = JSON.parse(localStorage.getItem('carrinho'));\n    if (Array.isArray(cartItemsLocal)) {\n      this.setState({ cartItems: cartItemsLocal });\n    }\n  }\n\n  addToLocalCart = () => {\n    const { cartItems } = this.state;\n    localStorage.setItem('carrinho', JSON.stringify(cartItems));\n  }\n\n  handleClick = () => {\n    const { categoryId, text } = this.state;\n    getProductsFromCategoryAndQuery(categoryId, text).then((response) => {\n      this.setState({\n        didSearch: true,\n        results: response.results,\n      });\n    });\n  };\n\n  addToCart = ({ target }) => {\n    const { id } = target;\n    const { results, cartItens } = this.state;\n    const objProduct = {\n      title: results[id].title,\n      thumbnail: results[id].thumbnail,\n      price: results[id].price,\n      id: results[id].id,\n    };\n    if (!cartItens.some((item) => item.title === objProduct.title)) {\n      this.setState((prevState) => ({\n        cartItens: [...prevState.cartItens, objProduct],\n      }));\n    }\n  }\n\n  categoryChecked = async ({ target }) => {\n    const { text } = this.state;\n    this.setState({ categoryId: target.id });\n\n    const response = await getProductsFromCategoryAndQuery(target.id, text);\n    this.setState({ results: response.results, didSearch: true });\n  }\n\n  onInputChange = ({ target }) => {\n    const { name } = target;\n    const formElementValue = target.type === 'checkbox' ? target.checked : target.value;\n\n    this.setState({ [name]: formElementValue });\n  }\n\n  render() {\n    const { results, didSearch, text, cartItens } = this.state;\n\n    return (\n      <div>\n        <Header cartItems={cartItens}/>\n        <p>{`Quantidade de Produtos no carrinho:${cartItens.length}`}</p>\n        <Link data-testid=\"shopping-cart-button\" to=\"/cart\">Carrinho</Link>\n        <label htmlFor=\"search\">\n          <input\n            data-testid=\"query-input\"\n            name=\"text\"\n            id=\"search\"\n            value={ text }\n            onChange={ this.onInputChange }\n          />\n        </label>\n        <button\n          type=\"button\"\n          onClick={ this.handleClick }\n          data-testid=\"query-button\"\n        >\n          pesquisar\n        </button>\n        { !didSearch\n          ? (\n            <p data-testid=\"home-initial-message\">\n              Digite algum termo de pesquisa ou escolha uma categoria.\n            </p>)\n          : results.map((item, i) => (\n            <div key={ item.id } data-testid=\"product\">\n              <Card\n                id={ item.id }\n                title={ item.title }\n                thumbnail={ item.thumbnail }\n                price={ item.price }\n                idItem={ i }\n                addToCart={ this.addToCart }\n              />\n            </div>\n          ))}\n        { results.length !== 0 && <p>Nenhum produto foi encontrado</p> }\n        <aside>\n          <Categories categoryChecked={ this.categoryChecked } />\n        </aside>\n      </div>\n    );\n  }\n}\n\nexport default Home;\n"]},"metadata":{},"sourceType":"module"}