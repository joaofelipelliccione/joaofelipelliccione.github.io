{"ast":null,"code":"var _jsxFileName = \"/home/joaofelipe/\\xC1rea de Trabalho/frontend-online-store-individual/src/pages/Cart.jsx\";\nimport React from 'react';\nimport CartCard from '../components/CartCard';\nimport Header from '../components/Header';\n\nclass Cart extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.insertItensInTheCart = () => {\n      // Função que capta os itens do carrinho salvos no local storage, sempre que a página Cart for montada.\n      const cartItems = JSON.parse(localStorage.getItem('userCart'));\n\n      if (Array.isArray(cartItems)) {\n        // Caso a key \"userCart\", de local storage, NÃO seja um array vazio...\n        this.setState({\n          cartItems\n        });\n      }\n    };\n\n    this.updateLocStUserCart = () => {\n      // Função que atualiza a key \"userCart\", de local storage, sempre que algum estado da página Cart for atualizado [componentDidUpdate()].\n      const {\n        cartItems\n      } = this.state;\n      localStorage.setItem('userCart', JSON.stringify(cartItems));\n    };\n\n    this.deleteCartItem = ({\n      target\n    }) => {\n      // Função que deleta produtos do carrinho.\n      const {\n        cartItems\n      } = this.state;\n      const productIndex = cartItems.findIndex(product => product.id === target.id); // REF: https://developer.mozilla.org/pt-BR/docs/Web/JavaScript/Reference/Global_Objects/Array/findIndex\n      // OBS: Todos os botões de deletar, possuem Id igual à ID do produto. Isso possibilita o funcionamento do target acima.\n\n      this.setState({\n        cartItems: cartItems.filter((_product, index) => index !== productIndex) // Retorna todos os produtos contidos no estado 'cartItems', menos o produto excluído.\n\n      });\n    };\n\n    this.purchaseTVIncrease = price => {\n      // Função que AUMENTA o valor do estado purchaseTotalValue, sempre que um novo componente CartCard for montado e/ou quando o botão de '+' de um componente CartCard for pressionado.\n      this.setState(prevState => ({\n        purchaseTotalValue: prevState.purchaseTotalValue + price\n      }));\n    };\n\n    this.purchaseTVDecrease = price => {\n      this.setState(prevState => ({\n        purchaseTotalValue: prevState.purchaseTotalValue - price\n      }));\n    };\n\n    this.state = {\n      cartItems: [],\n      purchaseTotalValue: 0\n    };\n  }\n\n  componentDidMount() {\n    this.insertItensInTheCart();\n  }\n\n  componentDidUpdate() {\n    this.updateLocStUserCart();\n  }\n\n  render() {\n    const {\n      cartItems,\n      purchaseTotalValue\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Header, {\n      cartItems: cartItems,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }\n    }), cartItems.length === 0 ? /*#__PURE__*/React.createElement(\"span\", {\n      \"data-testid\": \"shopping-cart-empty-message\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 13\n      }\n    }, \"Seu carrinho est\\xE1 vazio\") : cartItems.map(cartItem => /*#__PURE__*/React.createElement(\"div\", {\n      key: cartItem.title,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(CartCard, {\n      title: cartItem.title,\n      thumbnail: cartItem.thumbnail,\n      productPrice: cartItem.price,\n      id: cartItem.id,\n      deleteCartItem: this.deleteCartItem,\n      purchaseTVIncrease: this.purchaseTVIncrease,\n      subPrices: this.subPrices,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 15\n      }\n    }))), /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }\n    }, purchaseTotalValue.toFixed(2)));\n  }\n\n}\n\nexport default Cart;","map":{"version":3,"sources":["/home/joaofelipe/Área de Trabalho/frontend-online-store-individual/src/pages/Cart.jsx"],"names":["React","CartCard","Header","Cart","Component","constructor","props","insertItensInTheCart","cartItems","JSON","parse","localStorage","getItem","Array","isArray","setState","updateLocStUserCart","state","setItem","stringify","deleteCartItem","target","productIndex","findIndex","product","id","filter","_product","index","purchaseTVIncrease","price","prevState","purchaseTotalValue","purchaseTVDecrease","componentDidMount","componentDidUpdate","render","length","map","cartItem","title","thumbnail","subPrices","toFixed"],"mappings":"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","sourcesContent":["import React from 'react';\nimport CartCard from '../components/CartCard';\nimport Header from '../components/Header';\n\nclass Cart extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      cartItems: [],\n      purchaseTotalValue: 0,\n    };\n  }\n\n  componentDidMount() {\n    this.insertItensInTheCart();\n  }\n\n  componentDidUpdate() {\n    this.updateLocStUserCart();\n  }\n\n  insertItensInTheCart = () => { // Função que capta os itens do carrinho salvos no local storage, sempre que a página Cart for montada.\n    const cartItems = JSON.parse(localStorage.getItem('userCart'));\n\n    if (Array.isArray(cartItems)) { // Caso a key \"userCart\", de local storage, NÃO seja um array vazio...\n      this.setState({ cartItems });\n    }\n  }\n\n  updateLocStUserCart = () => { // Função que atualiza a key \"userCart\", de local storage, sempre que algum estado da página Cart for atualizado [componentDidUpdate()].\n    const { cartItems } = this.state;\n    localStorage.setItem('userCart', JSON.stringify(cartItems));\n  }\n\n  deleteCartItem = ({ target }) => { // Função que deleta produtos do carrinho.\n    const { cartItems } = this.state;\n    const productIndex = cartItems.findIndex((product) => product.id === target.id); // REF: https://developer.mozilla.org/pt-BR/docs/Web/JavaScript/Reference/Global_Objects/Array/findIndex\n    // OBS: Todos os botões de deletar, possuem Id igual à ID do produto. Isso possibilita o funcionamento do target acima.\n\n    this.setState({\n      cartItems: cartItems.filter((_product, index) => index !== productIndex), // Retorna todos os produtos contidos no estado 'cartItems', menos o produto excluído.\n    });\n  }\n\n  purchaseTVIncrease = (price) => { // Função que AUMENTA o valor do estado purchaseTotalValue, sempre que um novo componente CartCard for montado e/ou quando o botão de '+' de um componente CartCard for pressionado.\n    this.setState((prevState) => ({\n      purchaseTotalValue: prevState.purchaseTotalValue + price,\n    }));\n  }\n\n  purchaseTVDecrease = (price) => {\n    this.setState((prevState) => ({\n      purchaseTotalValue: prevState.purchaseTotalValue - price,\n    }));\n  }\n\n  render() {\n    const { cartItems, purchaseTotalValue } = this.state;\n    return (\n      <div>\n        <Header cartItems={cartItems}/>\n        {cartItems.length === 0\n          ? <span data-testid=\"shopping-cart-empty-message\">Seu carrinho está vazio</span>\n          : cartItems.map((cartItem) => (\n            <div key={ cartItem.title }>\n              <CartCard\n                title={ cartItem.title }\n                thumbnail={ cartItem.thumbnail }\n                productPrice={ cartItem.price }\n                id={ cartItem.id }\n                deleteCartItem={ this.deleteCartItem }\n                purchaseTVIncrease={ this.purchaseTVIncrease }\n                subPrices={ this.subPrices }\n              />\n            </div>\n          ))}\n        <h3>{purchaseTotalValue.toFixed(2)}</h3>\n      </div>\n    );\n  }\n}\n\nexport default Cart;\n"]},"metadata":{},"sourceType":"module"}